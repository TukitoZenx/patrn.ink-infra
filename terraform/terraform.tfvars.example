# patrn.ink k3s Terraform Configuration
# Copy this file to terraform.tfvars and fill in the values

# AWS Configuration
aws_region = "ap-south-2"

# Cluster naming
cluster_name = "patrn-ink"

# k3s version (check https://github.com/k3s-io/k3s/releases)
k3s_version = "v1.29.0+k3s1"

# Server (control plane) configuration
# t3.small: 2 vCPU, 2 GB RAM (~$15/month)
# t3.medium: 2 vCPU, 4 GB RAM (~$30/month)
server_instance_type = "t3.small"
server_volume_size   = 30

# Agent nodes (optional - set to 0 for single-node cluster)
# For small projects, a single node is often sufficient
agent_count         = 0
agent_instance_type = "t3.small"
agent_volume_size   = 30

# SSH access (optional - leave empty to use SSM only)
# Generate with: ssh-keygen -t ed25519 -C "patrn-k3s"
ssh_public_key = ""

# Restrict SSH access to your IP (recommended)
# ssh_allowed_cidrs = ["YOUR_IP/32"]
ssh_allowed_cidrs = ["0.0.0.0/0"]

# Restrict Kubernetes API access (recommended for production)
# api_allowed_cidrs = ["YOUR_IP/32"]
api_allowed_cidrs = ["0.0.0.0/0"]

# k3s options
# Set to false to use nginx-ingress instead of Traefik
install_traefik = true

# Domain
domain_name = "patrn.ink"

# =====================================================
# Cloudflare Configuration (required for DNS)
# =====================================================
# Get from Cloudflare Dashboard → Overview → Zone ID
cloudflare_zone_id = "your-cloudflare-zone-id"

# Create API Token at: https://dash.cloudflare.com/profile/api-tokens
# Required permissions: Zone:DNS:Edit, Zone:Zone Settings:Edit
cloudflare_api_token = "your-cloudflare-api-token"
enable_cert_manager   = true
enable_metrics_server = true
